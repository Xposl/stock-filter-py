---
description: 
globs: 
alwaysApply: true
---
# Backend Development Guidelines

## 1. API Design
- All API routes must be defined in [api.py](mdc:api.py) and use FastAPI.
- Route handler functions must always use [data_source_helper.py](mdc:core/data_source_helper.py)'s `DataSourceHelper` for all data orchestration and business logic.

## 2. Module Responsibilities
- Each handler submodule has a single responsibility. Direct database access or cross-handler calls are strictly forbidden; all coordination must go through `DataSourceHelper`.
- Scoring, strategy, indicator, valuation, and filtering each have their own handler for easy extension and maintenance.
- All database operations must go through the service layer (e.g., `ticker_repository`, `ticker_score_repository`).

## 3. Deployment & Running
- Recommended to start the API service with `python main.py`, which supports custom parameters (host, port, reload, workers).
- Dependencies are listed in [requirements.txt](mdc:requirements.txt) and must be installed in advance.
- The database file is `investnote.db`. If locked, see [README.md](mdc:README.md) for resolution.

## 4. Code Style
- Use PEP8 style, clear comments, and standardized naming for classes/functions/parameters.
- Important processes, interfaces, and extension points must have both Chinese and English comments.

# InvestNote-py 项目概览

## 项目基本信息

- **项目名称**: InvestNote-py
- **项目类型**: 基于AI的全球股票投资分析平台
- **技术栈**: Python + FastAPI + AI Agents (PocketFlow) + 多数据源集成
- **项目状态**: 核心架构已完成，AI分析引擎已集成
- **主要功能**: 新闻智能分析、股票评分系统、多市场数据整合、投资机会发现

## 核心功能架构 (已实现)

### 🏗️ 三层业务架构
```
API层 (FastAPI) → Handler层 (业务逻辑) → Repository层 (数据访问) → Model层 (Pydantic)
```

### 📊 股票数据系统 (已完成)
- **多市场支持**: A股、港股、美股统一处理
- **数据提供者层**: AKShare(优先级100) + 雪球(优先级50) 智能降级
- **评分系统**: 普通评分 + 趋势增强评分，支持List[TickerScore]标准化返回
- **技术指标**: SMA、EMA、MACD、KDJ、RSI等完整技术分析体系
- **策略系统**: 多种投资策略评估和组合

### 🤖 AI分析引擎 (已集成)
- **PocketFlow框架**: 100行LLM工作流框架，支持复杂AI分析流水线
- **千问LLM**: 阿里云大语言模型，主要AI分析引擎
- **硅基流动API**: OpenAI兼容接口，作为千问的备用方案
- **ChromaDB**: 嵌入式向量数据库，支持语义相似性分析
- **四层分析流水线**: 规则预筛选→AI深度分析→情感评估→投资建议

### 📰 新闻聚合系统 (已实现)
- **RSS聚合器**: 支持RSS源自动抓取和解析
- **雪球新闻聚合**: 基于重构后的雪球抽象层
- **新闻源管理**: 动态配置新闻源，支持权重和状态管理
- **内容提取**: newspaper3k + beautifulsoup4 + readability 完整内容处理

### 🔄 统一任务调度 (已实现)
- **定时股票更新**: 支持A股、港股、美股分市场定时更新
- **新闻抓取调度**: 工作日4次，周末2次的智能调度策略
- **后台任务处理**: FastAPI BackgroundTasks异步处理
- **自动化部署**: Docker + crontab 自动部署和任务管理

## 技术栈详情

### 🛠️ 核心技术
- **FastAPI + Uvicorn**: 高性能API服务器
- **Pydantic**: 数据验证和类型安全
- **SQLAlchemy**: 灵活的ORM支持
- **aiohttp**: 异步HTTP客户端
- **pytest**: 完整测试体系

### 🗄️ 数据存储
- **MySQL**: 生产环境主数据库
- **SQLite**: 开发环境数据库
- **ChromaDB**: 嵌入式向量数据库
- **Redis**: 缓存和消息队列

### 🔐 安全认证
- **gRPC认证服务**: 微服务认证架构
- **JWT Token**: 用户会话管理
- **中间件认证**: FastAPI认证中间件

## 数据库架构 (已实现)

### 核心数据表
- **ticker**: 股票基础信息 (支持多市场)
- **ticker_score**: 股票评分数据 (支持多种评分算法)
- **ticker_strategy**: 投资策略数据
- **ticker_indicator**: 技术指标数据
- **ticker_valuation**: 股票估值数据
- **news_sources**: 新闻源配置
- **news_articles**: 新闻文章 (包含AI分析字段)
- **api_log**: API访问日志

### 数据模型特点
- **Pydantic模型**: 统一使用BaseModel，摒弃SQLAlchemy模型
- **三层模型结构**: Base→Create→Update→Full 标准化设计
- **类型安全**: 完整的类型提示和验证
- **序列化支持**: to_dict和from_dict辅助函数

## 项目优势

### 🎯 架构优势
1. **模块化设计**: 清晰的分层架构，易于维护和扩展
2. **数据源多元化**: 智能降级策略，保证数据可用性
3. **AI集成完整**: PocketFlow + 千问 + ChromaDB 完整AI分析栈
4. **异步优先**: 全异步架构，高并发性能优异

### 📈 业务价值
1. **全市场覆盖**: A股、港股、美股统一分析平台
2. **智能决策支持**: AI驱动的新闻分析和投资建议
3. **实时数据更新**: 自动化数据更新和评分计算
4. **可扩展性**: 模块化设计支持功能快速扩展

### 🔧 技术特色
1. **数据提供者模式**: 统一数据访问，支持多源智能切换
2. **雪球抽象层**: 消除代码重复，提供统一雪球数据访问
3. **评分系统标准化**: List[TickerScore]统一返回类型
4. **PocketFlow集成**: 轻量级LLM工作流，支持复杂AI分析

## 用户群体

- **量化投资者**: 利用技术指标和评分系统进行数据驱动投资
- **新闻交易者**: 基于AI新闻分析进行事件驱动投资
- **多市场投资者**: 需要A股、港股、美股统一分析平台的投资者
- **AI辅助投资者**: 希望利用AI技术提升投资决策效率的用户

## 发展路线图

### 短期目标 (已完成)
- ✅ 核心架构搭建完成
- ✅ 股票数据系统集成
- ✅ AI分析引擎集成
- ✅ 新闻聚合系统实现

### 中期目标 (规划中)
- 🔄 AI分析结果可视化
- 🔄 投资组合管理功能
- 🔄 实时推送和告警系统
- 🔄 更多数据源集成

### 长期目标 (愿景)
- 🎯 机器学习模型训练平台
- 🎯 社区化投资决策平台
- 🎯 跨境投资一体化解决方案 